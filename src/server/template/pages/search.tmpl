{{define "content"}}
<div class="search-results-page" data-query="{{.Query}}" data-category="{{.Category}}" data-page="{{if .Pagination}}{{.Pagination.CurrentPage}}{{else}}1{{end}}">
    {{/* Category tabs */}}
    <div class="search-categories">
        <a href="/search?q={{urlquery .Query}}&category=general" class="category-link{{if eq .Category "general"}} active{{end}}">
            <span class="cat-icon">üåê</span> All
        </a>
        <a href="/search?q={{urlquery .Query}}&category=images" class="category-link{{if eq .Category "images"}} active{{end}}">
            <span class="cat-icon">üñºÔ∏è</span> Images
        </a>
        <a href="/search?q={{urlquery .Query}}&category=videos" class="category-link{{if eq .Category "videos"}} active{{end}}">
            <span class="cat-icon">üé•</span> Videos
        </a>
        <a href="/search?q={{urlquery .Query}}&category=news" class="category-link{{if eq .Category "news"}} active{{end}}">
            <span class="cat-icon">üì∞</span> News
        </a>
        <a href="/search?q={{urlquery .Query}}&category=maps" class="category-link{{if eq .Category "maps"}} active{{end}}">
            <span class="cat-icon">üó∫Ô∏è</span> Maps
        </a>
    </div>

    {{/* Instant Answer Box */}}
    {{if .InstantAnswer}}
    <div class="instant-answer-box" data-type="{{.InstantAnswer.Type}}">
        <div class="instant-answer-header">
            <span class="instant-answer-title">{{.InstantAnswer.Title}}</span>
            {{if .InstantAnswer.Source}}
            <a href="{{.InstantAnswer.SourceURL}}" class="instant-answer-source" target="_blank" rel="noopener noreferrer">{{.InstantAnswer.Source}}</a>
            {{end}}
        </div>
        <div class="instant-answer-content">
            {{.InstantAnswer.Content | safeHTML}}
        </div>
    </div>
    {{end}}

    {{if .Error}}
    <div class="search-error">
        <p>{{.Error}}</p>
    </div>
    {{else if .Results}}
    <div class="search-info">
        <span class="result-count">{{.TotalResults}} results</span>
        <span class="search-time">({{printf "%.2f" .SearchTime}} seconds)</span>
    </div>

    {{if eq .Category "images"}}
    {{/* Image Grid Layout */}}
    <div class="image-results" id="results-container">
        {{range .Results}}
        <div class="image-result" data-full-url="{{.URL}}">
            <a href="{{.URL}}" target="_blank" rel="noopener noreferrer">
                {{if .Thumbnail}}
                <img src="{{.Thumbnail}}" alt="{{.Title}}" loading="lazy">
                {{else}}
                <div class="image-placeholder">
                    <span>üñºÔ∏è</span>
                </div>
                {{end}}
            </a>
            <div class="image-result-info">
                <a href="{{.URL}}" class="image-title" target="_blank" rel="noopener noreferrer">{{.Title}}</a>
                <div class="image-source">{{.Engine}}</div>
            </div>
        </div>
        {{end}}
    </div>
    {{else if eq .Category "videos"}}
    {{/* Video Grid Layout */}}
    <div class="video-results" id="results-container">
        {{range .Results}}
        <div class="video-result">
            <a href="{{.URL}}" class="video-thumbnail-link" target="_blank" rel="noopener noreferrer">
                <div class="video-thumbnail-container">
                    {{if .Thumbnail}}
                    <img src="{{.Thumbnail}}" alt="{{.Title}}" loading="lazy" class="video-thumbnail">
                    {{else}}
                    <div class="video-placeholder">
                        <span>üé•</span>
                    </div>
                    {{end}}
                    <div class="video-play-overlay">
                        <svg class="play-icon" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M8 5v14l11-7z"/>
                        </svg>
                    </div>
                    {{if .Duration}}
                    <span class="video-duration">{{formatVideoDuration .Duration}}</span>
                    {{end}}
                </div>
            </a>
            <div class="video-info">
                <h3 class="video-title">
                    <a href="{{.URL}}" target="_blank" rel="noopener noreferrer">{{.Title}}</a>
                </h3>
                <div class="video-meta">
                    <span class="video-engine">{{.Engine}}</span>
                    {{if .ViewCount}}
                    <span class="video-views">{{formatViewCount .ViewCount}} views</span>
                    {{end}}
                    {{if .Author}}
                    <span class="video-author">{{.Author}}</span>
                    {{end}}
                </div>
                {{if .Content}}
                <p class="video-description">{{.Content}}</p>
                {{end}}
            </div>
        </div>
        {{end}}
    </div>
    {{else}}
    {{/* Standard Results List */}}
    <div class="results-list" id="results-container">
        {{range .Results}}
        <article class="result-item">
            <div class="result-favicon">
                <img src="https://www.google.com/s2/favicons?domain={{.URL}}&sz=32"
                     alt=""
                     loading="lazy"
                     onerror="this.classList.add('hidden');this.nextElementSibling.classList.remove('hidden');">
                <span class="favicon-placeholder hidden">{{slice (printf "%s" .Title) 0 1}}</span>
            </div>
            <div class="result-body">
                <h3 class="result-title">
                    <a href="{{.URL}}" target="_blank" rel="noopener noreferrer">{{.Title}}</a>
                </h3>
                <div class="result-url">
                    <span class="result-url-text">{{.URL}}</span>
                </div>
                <p class="result-description">{{.Content}}</p>
                <div class="result-meta">
                    <span class="result-engine">{{.Engine}}</span>
                    {{if .PublishedAt}}
                    <span class="result-date">{{.PublishedAt.Format "Jan 2, 2006"}}</span>
                    {{end}}
                </div>
            </div>
        </article>
        {{end}}
    </div>
    {{end}}

    {{/* Infinite Scroll Trigger */}}
    <div class="infinite-scroll-trigger" id="scroll-trigger"></div>
    <div class="loading-more hidden" id="loading-indicator">
        <div class="loading-spinner"></div>
        <span>Loading more results...</span>
    </div>
    <div class="end-of-results hidden" id="end-indicator">
        No more results
    </div>

    {{else}}
    <div class="no-results">
        <p>No results found for "<strong>{{.Query}}</strong>"</p>
        <p class="no-results-hint">Try different keywords or check your spelling.</p>
    </div>
    {{end}}
</div>
{{/* Per AI.md PART 16: NO inline JS - all scripts in app.js */}}
{{end}}
