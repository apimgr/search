{{define "header"}}
<header class="header">
    <a href="/" class="site-brand">
        {{if .Config.Server.Branding.LogoURL}}
        <img src="{{.Config.Server.Branding.LogoURL}}" alt="{{.Config.Server.Title}}" class="logo-img">
        {{else}}
        <span class="logo-icon">üîç</span>
        {{end}}
        <span class="brand-text">{{default "Search" .Config.Server.Branding.AppName}}</span>
    </a>

    {{/* User icon (always visible, far right) */}}
    <div class="user-menu">
        {{if .User}}
        {{/* Logged in: user icon dropdown */}}
        <div class="dropdown">
            <button class="dropdown-toggle user-icon" aria-label="User menu">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                </svg>
            </button>
            <div class="dropdown-menu">
                <span class="dropdown-header">{{.User.Username}}</span>
                <a href="/user/profile">Profile</a>
                <a href="/user/settings">Settings</a>
                <hr>
                <a href="/auth/logout">Logout</a>
            </div>
        </div>
        {{else}}
        {{/* Logged out: login icon */}}
        <a href="/auth/login" class="user-icon" aria-label="Login">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                <circle cx="12" cy="7" r="4"></circle>
            </svg>
        </a>
        {{end}}
    </div>
</header>
{{end}}
